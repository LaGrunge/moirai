<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moirai Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="https://github.com/LaGrunge/moirai" target="_blank" rel="noopener noreferrer" class="header-link">
                <img src="assets/moirai.png" alt="Moirai Logo" class="logo">
                <h1>MOIRAI Dashboard</h1>
            </a>
        </div>
        <div class="header-right">
            <div id="global-loader" class="global-loader" style="display: none;">
                <div class="loader-spinner"></div>
                <span class="loader-text">Loading...</span>
            </div>
            <div id="config-select" class="config-select-wrapper">
                <button class="config-select-btn" id="config-select-btn">
                    <span class="config-icon"></span>
                    <span class="config-name">Select repository...</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </button>
                <div class="config-dropdown" id="config-dropdown"></div>
            </div>
            <button id="demo-toggle" class="demo-toggle" title="Demo mode OFF - click to enable">
                <span class="demo-icon">üé≠</span>
            </button>
            <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                <span class="icon-moon">üåô</span>
                <span class="icon-sun">‚òÄÔ∏è</span>
            </button>
        </div>
    </header>

    <nav class="tabs">
        <button class="tab-btn" data-tab="overview">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f3db.png" alt="" class="tab-icon"> Overview
        </button>
        <button class="tab-btn active" data-tab="branches">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f33f.png" alt="" class="tab-icon"> Branches
        </button>
        <button class="tab-btn" data-tab="cron">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/23f3.png" alt="" class="tab-icon"> Cron Builds
        </button>
        <button class="tab-btn" data-tab="contributors">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f3c6.png" alt="" class="tab-icon"> Contributors
        </button>
        <button class="tab-btn" data-tab="infra">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f528.png" alt="" class="tab-icon"> Infrastructure
        </button>
        <button class="tab-btn" data-tab="settings">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f531.png" alt="" class="tab-icon"> Settings
        </button>
    </nav>

    <main class="content">
        <div id="overview-tab" class="tab-content">
            <div id="overview-content" class="overview-content">
                <div class="placeholder">Select a repository to view overview</div>
            </div>
        </div>

        <div id="branches-tab" class="tab-content active">
            <div class="branches-toolbar">
                <input type="text" id="branch-filter" class="branch-filter" placeholder="Filter branches/PRs...">
                <div class="filter-toggles">
                    <button class="filter-toggle active" id="toggle-branches" title="Show branches">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"/>
                        </svg>
                        Branches
                    </button>
                    <button class="filter-toggle active" id="toggle-prs" title="Show pull requests">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"/>
                        </svg>
                        PRs
                    </button>
                </div>
                <div class="sort-dropdown-container">
                    <select id="sort-select" class="sort-select" title="Sort by">
                        <option value="status">Sort by Status</option>
                        <option value="time">Sort by Time</option>
                        <option value="name">Sort by Name</option>
                    </select>
                </div>
            </div>
            <div class="cards-container" id="branches-cards">
                <div class="placeholder">Select a repository to view branch status</div>
            </div>
        </div>

        <div id="cron-tab" class="tab-content">
            <div class="cards-container" id="cron-cards">
                <div class="placeholder">Select a repository to view cron builds</div>
            </div>
        </div>

        <div id="contributors-tab" class="tab-content">
            <div id="contributors-content" class="contrib-content">
                <div class="placeholder">Select a repository to view contributors</div>
            </div>
        </div>

        <div id="infra-tab" class="tab-content">
            <div id="infra-content" class="infra-content">
                <div class="placeholder">Select a repository to view infrastructure details</div>
            </div>
        </div>

        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <h2>Settings</h2>

                <div class="settings-section">
                    <h3>Saved Repositories</h3>
                    <p class="setting-description">Add repositories to monitor. They will appear in the dropdown for quick access.</p>
                    <div id="saved-configs-list" class="saved-configs-list">
                        <div class="placeholder">No saved repositories yet</div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Display Options</h3>
                    <label class="setting-item">
                        <input type="checkbox" id="setting-filter-empty-repos" checked>
                        <span class="setting-label">Hide repositories without builds</span>
                        <span class="setting-description">When adding a repository, only show repos that have at least one build</span>
                    </label>
                    <div class="setting-item">
                        <label for="setting-stats-period" class="setting-label">Default statistics period</label>
                        <select id="setting-stats-period" class="form-select setting-select">
                            <option value="7">7 days</option>
                            <option value="14">14 days</option>
                            <option value="30" selected>30 days</option>
                            <option value="90">90 days</option>
                        </select>
                        <span class="setting-description">Default time period for build statistics</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Add Repository</h3>
                    <div class="add-config-form">
                        <div class="form-row">
                            <label>Server</label>
                            <select id="add-config-server" class="form-select">
                                <option value="">Select server...</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Repository</label>
                            <select id="add-config-repo" class="form-select" disabled>
                                <option value="">Select server first...</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Display Name (optional)</label>
                            <input type="text" id="add-config-name" class="form-input" placeholder="e.g. My Project">
                        </div>
                        <button id="add-config-btn" class="settings-btn" disabled>Add Repository</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Data</h3>
                    <button id="clear-cache-btn" class="settings-btn settings-btn-danger">Clear All Data</button>
                    <span class="setting-description">Clears all saved repositories and preferences</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <span class="footer-title">MOIRAI Dashboard</span>
                <span class="footer-separator">‚Ä¢</span>
                <span class="connection-status" id="connection-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Disconnected</span>
                </span>
            </div>
            <div class="footer-center">
                <span class="last-update" id="last-update">Last update: ‚Äî</span>
            </div>
            <div class="footer-right">
                <span class="keyboard-hint" title="Keyboard shortcuts: R=Refresh, 1-6=Tabs">‚å®Ô∏è Shortcuts</span>
            </div>
        </div>
    </footer>

    <script type="module" src="js/main.js"></script>
</body>
</html>
